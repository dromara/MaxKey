var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,t){if(t.get||t.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[f]=t.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var f=0;return $jscomp.iteratorPrototype(function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,f){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var t=0,d={next:function(){if(t<a.length){var u=t++;return{value:f(u,a[u]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,f,t,d){if(f){t=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var u=a[d];u in t||(t[u]={});t=t[u]}a=a[a.length-1];d=t[a];f=f(d);f!=d&&null!=f&&$jscomp.defineProperty(t,a,{configurable:!0,writable:!0,value:f})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.findInternal=function(a,f,t){a instanceof String&&(a=String(a));for(var d=a.length,u=0;u<d;u++){var D=a[u];if(f.call(t,D,u,a))return{i:u,v:D}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,t){return $jscomp.findInternal(this,a,t).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var f=a.jgrid,t=f.fullBoolFeedback,d=f.hasOneFromClasses,u=a.fn.jqGrid,D=function(a){return u.getGuiStyles.call(this,"states."+a)},I=function(e){var v=a.makeArray(arguments).slice(1);v.unshift("");v.unshift("Inline");v.unshift(e);return f.feedback.apply(this,v)};f.inlineEdit=f.inlineEdit||{};f.extend({editRow:function(e,
v,m,g,c,p,d,B,k,b){var h={},n=a.makeArray(arguments).slice(1);"object"===a.type(n[0])?h=n[0]:(void 0!==v&&(h.keys=v),a.isFunction(m)&&(h.oneditfunc=m),a.isFunction(g)&&(h.successfunc=g),void 0!==c&&(h.url=c),null!=p&&(h.extraparam=p),a.isFunction(d)&&(h.aftersavefunc=d),a.isFunction(B)&&(h.errorfunc=B),a.isFunction(k)&&(h.afterrestorefunc=k),a.isFunction(b)&&(h.beforeEditRow=b));return this.each(function(){var b=this,c=a(b),g=b.p,p=0,r=null,v={},m=g.colModel,k=g.prmNames;if(b.grid){var d=a.extend(!0,
{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,mtype:"POST",focusField:!0},f.inlineEdit,g.inlineEditing||{},h),q=c.jqGrid("getInd",e,!0),n=d.focusField,B="object"===typeof n&&null!=n?a(n.target||n).closest("tr.jqgrow>td")[0]:null;if(!1!==q&&(d.extraparam[k.oper]===k.addoper||I.call(b,d,"beforeEditRow",d,e))&&"0"===(a(q).attr("editable")||"0")&&!a(q).hasClass("not-editable-row")){k=f.detectRowEditing.call(b,
e);if(null!=k&&"cellEditing"===k.mode){var k=k.savedRow,H=b.rows[k.id],u=D.call(b,"select");c.jqGrid("restoreCell",k.id,k.ic);a(H.cells[k.ic]).removeClass("edit-cell "+u);a(H).addClass(u).attr({"aria-selected":"true",tabindex:"0"})}f.enumEditableCells.call(b,q,a(q).hasClass("jqgrid-new-row")?"add":"edit",function(c){var l=c.cm,h=a(c.dataElement),k=c.dataWidth,w,d=l.name,m=l.edittype,n=c.iCol,q=l.editoptions||{};if("hidden"!==c.editable){try{w=a.unformat.call(this,c.td,{rowId:e,colModel:l},n)}catch(P){w=
"textarea"===m?h.text():h.html()}v[d]=w;h.html("");l=a.extend({},q,{id:e+"_"+d,name:d,rowId:e,mode:c.mode,cm:l,iCol:n});if("&nbsp;"===w||"&#160;"===w||1===w.length&&160===w.charCodeAt(0))w="";w=f.createEl.call(b,m,l,w,!0,a.extend({},f.ajaxOptions,g.ajaxSelectOptions||{}));a(w).addClass("editable");h.append(w);k&&a(w).width(c.dataWidth);f.bindEv.call(b,w,l);"select"===m&&!0===q.multiple&&void 0===q.dataUrl&&f.msie&&a(w).width(a(w).width());null===r&&(r=n);p++}});0<p&&(v.id=e,g.savedRow.push(v),a(q).attr("editable",
"1"),n&&("number"===typeof n&&parseInt(n,10)<=m.length?r=n:"string"===typeof n?r=g.iColByName[n]:null!=B&&(r=B.cellIndex),setTimeout(function(){var e=c.jqGrid("getNumberOfFrozenColumns"),l=function(a){return g.frozenColumns&&0<e&&r<e?b.grid.fbRows[q.rowIndex].cells[a]:q.cells[a]},f=function(b){return a(b).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},h=function(){return f(g.frozenColumns&&0<e?b.grid.fbRows[q.rowIndex]:q).first()},k=f(l(r));0<k.length?
k.first().focus():"number"===typeof d.defaultFocusField||"string"===typeof d.defaultFocusField?(k=f(l("number"===typeof d.defaultFocusField?d.defaultFocusField:g.iColByName[d.defaultFocusField])),0===k.length&&(k=h()),k.first().focus()):h().focus()},0)),!0===d.keys&&(m=a(q),g.frozenColumns&&(m=m.add(b.grid.fbRows[q.rowIndex])),m.bind("keydown",function(a){if(27===a.keyCode)return c.jqGrid("restoreRow",e,d.afterrestorefunc),!1;if(13===a.keyCode){if("TEXTAREA"===a.target.tagName)return!0;c.jqGrid("saveRow",
e,d);return!1}})),t.call(b,d.oneditfunc,"jqGridInlineEditRow",e,d))}}})},saveRow:function(e,d,m,g,c,p,H,B){var k=a.makeArray(arguments).slice(1),b={},h=this[0],n=a(h),l=null!=h?h.p:null,v=f.info_dialog,y=a.isFunction,u=null!=f.defaults&&y(f.defaults.fatalError)?f.defaults.fatalError:alert;if(h.grid&&null!=l){"object"===a.type(k[0])?b=k[0]:(y(d)&&(b.successfunc=d),void 0!==m&&(b.url=m),void 0!==g&&(b.extraparam=g),y(c)&&(b.aftersavefunc=c),y(p)&&(b.errorfunc=p),y(H)&&(b.afterrestorefunc=H),y(B)&&(b.beforeSaveRow=
B));var k=function(a){return n.jqGrid("getGridRes",a)},b=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:k("defaults.savetext")||"Saving..."},f.inlineEdit,l.inlineEditing||{},b),r={},J={},z={},A,F,q,E;q=n.jqGrid("getInd",e,!0);var C=a(q);A=l.prmNames;var L=k("errors.errcap"),M=k("edit.bClose"),K;if(!1!==q&&(k=b.extraparam[A.oper]===
A.addoper?"add":"edit",I.call(h,b,"beforeSaveRow",b,e,k)&&(A=C.attr("editable"),b.url=b.url||l.editurl,K="clientArray"!==b.url,"1"===A)))if(f.enumEditableCells.call(h,q,C.hasClass("jqgrid-new-row")?"add":"edit",function(b){var c=b.cm,l=c.formatter,k=c.editoptions||{},g=c.formatoptions||{},d={},m=(a.jgrid.detectRowEditing.call(h,e)||{}).savedRow,p=f.getEditedValue.call(h,a(b.dataElement),c,d,b.editable);"select"===c.edittype&&"select"!==c.formatter&&(J[c.name]=d.text);E=f.checkValues.call(h,p,b.iCol,
void 0,void 0,a.extend(b,{oldValue:null!=m?m[c.name]:null,newValue:p,oldRowData:m}));if(null!=E&&!1===E[0])return!1;"date"===l&&!0!==g.sendFormatted&&(p=a.unformat.date.call(h,p,c));K&&!0===k.NullIfEmpty&&""===p&&(p="null");r[c.name]=p}),null!=E&&!1===E[0])try{var G=n.jqGrid("getGridRowById",e),x=f.findPos(G);v.call(h,L,E[1],M,{left:x[0],top:x[1]+a(G).outerHeight()})}catch(N){u(E[1])}else if(G=e,A=l.prmNames,x=!1===l.keyName?A.id:l.keyName,r&&(r[A.oper]=A.editoper,void 0===r[x]||""===r[x]?r[x]=e:
q.id!==l.idPrefix+r[x]&&(q=f.stripPref(l.idPrefix,e),void 0!==l._index[q]&&(l._index[r[x]]=l._index[q],delete l._index[q]),e=l.idPrefix+r[x],C.attr("id",e),l.selrow===G&&(l.selrow=e),a.isArray(l.selarrrow)&&(q=a.inArray(G,l.selarrrow),0<=q&&(l.selarrrow[q]=e)),l.multiselect&&(q="jqg_"+l.id+"_"+e,C.find("input.cbox").attr("id",q).attr("name",q))),r=a.extend({},r,l.inlineData||{},b.extraparam)),K)n.jqGrid("progressBar",{method:"show",loadtype:b.saveui,htmlcontent:b.savetext}),z=a.extend({},r,z),z[x]=
f.stripPref(l.idPrefix,z[x]),l.autoEncodeOnEdit&&a.each(z,function(a,b){y(b)||(z[a]=f.oldEncodePostedData(b))}),a.ajax(a.extend({url:y(b.url)?b.url.call(h,z[x],k,z,b):b.url,data:f.serializeFeedback.call(h,y(b.serializeSaveData)?b.serializeSaveData:l.serializeRowData,"jqGridInlineSerializeSaveData",z),type:y(b.mtype)?b.mtype.call(h,k,b,z[x],z):b.mtype,complete:function(c,k){n.jqGrid("progressBar",{method:"hide",loadtype:b.saveui});if((300>c.status||304===c.status)&&(0!==c.status||4!==c.readyState)){var g,
d;d=n.triggerHandler("jqGridInlineSuccessSaveRow",[c,e,b]);if(null==d||!0===d)d=[!0,r];d[0]&&y(b.successfunc)&&(d=b.successfunc.call(h,c));a.isArray(d)?(g=d[0],r=d[1]||r):g=d;if(!0===g){l.autoEncodeOnEdit&&a.each(r,function(a,b){r[a]=f.oldDecodePostedData(b)});r=a.extend({},r,J);n.jqGrid("setRowData",e,r);C.attr("editable","0");for(g=0;g<l.savedRow.length;g++)if(String(l.savedRow[g].id)===String(e)){F=g;break}0<=F&&l.savedRow.splice(F,1);t.call(h,b.aftersavefunc,"jqGridInlineAfterSaveRow",e,c,r,b);
C.removeClass("jqgrid-new-row").unbind("keydown")}else t.call(h,b.errorfunc,"jqGridInlineErrorSaveRow",e,c,k,null,b),!0===b.restoreAfterError&&n.jqGrid("restoreRow",e,b.afterrestorefunc)}},error:function(a,c,l){n.triggerHandler("jqGridInlineErrorSaveRow",[e,a,c,l,b]);if(y(b.errorfunc))b.errorfunc.call(h,e,a,c,l);else{a=a.responseText||a.statusText;try{v.call(h,L,'<div class="'+D.call(h,"error")+'">'+a+"</div>",M,{buttonalign:"right"})}catch(O){u(a)}}!0===b.restoreAfterError&&n.jqGrid("restoreRow",
e,b.afterrestorefunc)}},f.ajaxOptions,l.ajaxRowOptions,b.ajaxSaveOptions||{}));else{r=a.extend({},r,J);q=n.jqGrid("setRowData",e,r);C.attr("editable","0");for(k=0;k<l.savedRow.length;k++)if(String(l.savedRow[k].id)===String(G)){F=k;break}0<=F&&l.savedRow.splice(F,1);t.call(h,b.aftersavefunc,"jqGridInlineAfterSaveRow",e,q,r,b);C.removeClass("jqgrid-new-row").unbind("keydown")}}},restoreRow:function(e,d){var m=a.makeArray(arguments).slice(1),g={};"object"===a.type(m[0])?g=m[0]:a.isFunction(d)&&(g.afterrestorefunc=
d);return this.each(function(){var c=this,d=a(c),m=c.p,v=-1,k={},b;if(c.grid){var h=a.extend(!0,{},f.inlineEdit,m.inlineEditing||{},g),n=d.jqGrid("getInd",e,!0);if(!1!==n&&I.call(c,h,"beforeCancelRow",h,e)){for(b=0;b<m.savedRow.length;b++)if(String(m.savedRow[b].id)===String(e)){v=b;break}if(0<=v){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+f.jqID(n.id)).datepicker("hide")}catch(l){}a.each(m.colModel,function(){var b=this.name;m.savedRow[v].hasOwnProperty(b)&&(k[b]=m.savedRow[v][b],
!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(k[b]=a.unformat.date.call(c,k[b],this)))});d.jqGrid("setRowData",e,k);a(n).attr("editable","0").unbind("keydown");m.savedRow.splice(v,1);a("#"+f.jqID(e),c).hasClass("jqgrid-new-row")&&setTimeout(function(){d.jqGrid("delRowData",e);d.jqGrid("showAddEditButtons",!1)},0)}t.call(c,h.afterrestorefunc,"jqGridInlineAfterRestoreRow",e)}}})},addRow:function(e){return this.each(function(){if(this.grid){var d=
this,m=a(d),g=d.p,c=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},f.inlineEdit,g.inlineEditing||{},e||{});I.call(d,c,"beforeAddRow",c.addRowParams)&&(c.rowID=a.isFunction(c.rowID)?c.rowID.call(d,c):null!=c.rowID?c.rowID:f.randId(),!0===c.useDefValues&&a(g.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var e=this.editoptions.defaultValue;c.initdata[this.name]=a.isFunction(e)?e.call(d):
e}}),c.rowID=g.idPrefix+c.rowID,m.jqGrid("addRowData",c.rowID,c.initdata,c.position),a("#"+f.jqID(c.rowID),d).addClass("jqgrid-new-row"),c.useFormatter?a("#"+f.jqID(c.rowID)+" .ui-inline-edit",d).click():(g=g.prmNames,c.addRowParams.extraparam[g.oper]=g.addoper,m.jqGrid("editRow",c.rowID,c.addRowParams),m.jqGrid("setSelection",c.rowID)))}})},inlineNav:function(e,v){"object"===typeof e&&(v=e,e=void 0);return this.each(function(){var m=this,g=a(m),c=m.p;if(this.grid&&null!=c){var p,t=e===c.toppager?
c.idSel+"_top":c.idSel,u=e===c.toppager?c.id+"_top":c.id,k=D.call(m,"disabled"),b=a.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},g.jqGrid("getGridRes","nav"),f.nav||{},c.navOptions||{},f.inlineNav||{},c.inlineNavOptions||{},v||{});if(void 0===e)if(c.pager)if(g.jqGrid("inlineNav",
c.pager,b),c.toppager)e=c.toppager,t=c.idSel+"_top",u=c.id+"_top";else return;else c.toppager&&(e=c.toppager,t=c.idSel+"_top",u=c.id+"_top");if(void 0!==e&&(p=a(e),!(0>=p.length))){0>=p.find(".navtable").length&&g.jqGrid("navGrid",e,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1});c._inlinenav=!0;if(!0===b.addParams.useFormatter){p=c.colModel;var h,n;for(h=0;h<p.length;h++)if(p[h].formatter&&"actions"===p[h].formatter){p[h].formatoptions&&(n={keys:!1,onEdit:null,onSuccess:null,afterSave:null,
onError:null,afterRestore:null,extraparam:{},url:null},p=a.extend(n,p[h].formatoptions),b.addParams.addRowParams={keys:p.keys,oneditfunc:p.onEdit,successfunc:p.onSuccess,url:p.url,extraparam:p.extraparam,aftersavefunc:p.afterSave,errorfunc:p.onError,afterrestorefunc:p.afterRestore});break}}b.add&&g.jqGrid("navButtonAdd",e,{caption:b.addtext,title:b.addtitle,commonIconClass:b.commonIconClass,buttonicon:b.addicon,iconsOverText:b.iconsOverText,id:u+"_iladd",onClickButton:function(){d(this,k)||g.jqGrid("addRow",
b.addParams)}});b.edit&&g.jqGrid("navButtonAdd",e,{caption:b.edittext,title:b.edittitle,commonIconClass:b.commonIconClass,buttonicon:b.editicon,iconsOverText:b.iconsOverText,id:u+"_iledit",onClickButton:function(){if(!d(this,k)){var a=c.selrow;a?g.jqGrid("editRow",a,b.editParams):m.modalAlert()}}});b.save&&(g.jqGrid("navButtonAdd",e,{caption:b.savetext,title:b.savetitle,commonIconClass:b.commonIconClass,buttonicon:b.saveicon,iconsOverText:b.iconsOverText,id:u+"_ilsave",onClickButton:function(){if(!d(this,
k)){var e=c.savedRow[0].id;if(e){var h=c.prmNames,n=h.oper,p=b.editParams;a("#"+f.jqID(e),m).hasClass("jqgrid-new-row")?(b.addParams.addRowParams.extraparam[n]=h.addoper,p=b.addParams.addRowParams):(b.editParams.extraparam||(b.editParams.extraparam={}),b.editParams.extraparam[n]=h.editoper);g.jqGrid("saveRow",e,p)}else m.modalAlert()}}}),a(t+"_ilsave").addClass(k));b.cancel&&(g.jqGrid("navButtonAdd",e,{caption:b.canceltext,title:b.canceltitle,commonIconClass:b.commonIconClass,buttonicon:b.cancelicon,
iconsOverText:b.iconsOverText,id:u+"_ilcancel",onClickButton:function(){if(!d(this,k)){var e=c.savedRow[0].id,h=b.editParams;e?(a("#"+f.jqID(e),m).hasClass("jqgrid-new-row")&&(h=b.addParams.addRowParams),g.jqGrid("restoreRow",e,h)):m.modalAlert()}}}),a(t+"_ilcancel").addClass(k));!0===b.restoreAfterSelect&&g.bind("jqGridSelectRow",function(a,e){if(0<c.savedRow.length&&!0===c._inlinenav){var d=c.savedRow[0].id;e!==d&&"number"!==typeof d&&g.jqGrid("restoreRow",d,b.editParams)}});g.bind("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",
function(){g.jqGrid("showAddEditButtons",!1)});g.bind("jqGridInlineEditRow",function(a,b){g.jqGrid("showAddEditButtons",!0,b)})}}})},showAddEditButtons:function(e){return this.each(function(){if(this.grid){var d=this.p,f=d.idSel,g=D.call(this,"disabled"),c=f+"_ilsave,"+f+"_ilcancel"+(d.toppager?","+f+"_top_ilsave,"+f+"_top_ilcancel":""),d=f+"_iladd,"+f+"_iledit"+(d.toppager?","+f+"_top_iladd,"+f+"_top_iledit":"");a(e?d:c).addClass(g);a(e?c:d).removeClass(g)}})}})});
//# sourceMappingURL=grid.inlinedit.map
